{% extends "base.html" %}
{% block title %}لاگ‌ها | Social Admin{% endblock %}
{% block page_title %}گزارش اجرای پردازه‌ها{% endblock %}
{% block page_subtitle %}آخرین رویدادها و خطاهای سیستم را مرور کنید{% endblock %}
{% block content %}
<section class="panel">
    <header class="panel-header">
        <div>
            <h2>فایل‌های لاگ</h2>
            <p class="panel-description">حداکثر ده فایل اخیر نمایش داده می‌شود</p>
        </div>
    </header>
    {% if log_files %}
        <div class="logs">
            {% for log in log_files %}
                <details class="log-entry" {% if loop.first %}open{% endif %}>
                    <summary>
                        <span class="log-name">{{ log.name }}</span>
                        <span class="log-date">آخرین تغییر: {{ log.modified_display }}</span>
                    </summary>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>سطح</th>
                                    <th>زمان</th>
                                    <th>پیام</th>
                                    <th>جزئیات</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for entry in log.entries %}
                                    <tr>
                                        <td><span class="badge badge-{{ entry.badge_class }}">{{ entry.level }}</span></td>
                                        <td>{{ entry.timestamp }}</td>
                                        <td>{{ entry.message }}</td>
                                        <td>
                                            {% if entry.details %}
                                                <pre class="log-details">{{ entry.details }}</pre>
                                            {% else %}
                                                -
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </details>
            {% endfor %}
        </div>
    {% else %}
        <p class="empty">لاگی برای نمایش وجود ندارد.</p>
    {% endif %}
</section>
{% endblock %}
