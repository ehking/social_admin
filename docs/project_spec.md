# دستیار تولید و انتشار محتوای خودکار

## هدف سیستم
ایجاد یک پلتفرم واحد برای مدیریت، تولید و انتشار خودکار محتوای چندرسانه‌ای در شبکه‌های اجتماعی (اینستاگرام، یوتیوب، تلگرام) با تمرکز بر سناریوهای قابل‌تعریف، زمان‌بندی منعطف و مونتاژ خودکار ویدیو.

## ماژول‌ها و قابلیت‌ها

### 1. پنل ادمین
- **چیدمان راست‌چین:** رابط کاربری پنل باید به‌صورت کامل راست‌چین و سازگار با زبان فارسی طراحی شود؛ شامل منوها، فرم‌ها، جداول و اجزای ناوبری.
- **احراز هویت:** ورود امن با JWT یا سشن، پشتیبانی اختیاری از 2FA.
- **تنظیمات سرویس‌ها:** فرم متمرکز برای مدیریت توکن‌ها و کلیدهای OpenAI، OAuth یوتیوب، توکن گراف اینستاگرام، توکن بات تلگرام، کلیدهای Pexels/Pixabay/Coverr و اطلاعات ذخیره‌سازی ابری.
- **لاگ‌ها و مانیتورینگ:** مشاهده تاریخچه اجراها، لاگ خطاها و درخواست‌های API.
- **مدیریت اکانت‌ها:** ایجاد، ویرایش و حذف حساب‌های متصل همراه با پارامترهای اختصاصی (Page ID، توکن OAuth، شناسه کانال، chat_id).
- **احراز مالکیت:** پیاده‌سازی جریان OAuth یا ذخیره توکن‌های بلندمدت با رمزنگاری.
- **کنترل دسترسی:** تعریف نقش‌های ادمین و اپراتور (اختیاری).

### 2. زمان‌بندی و قوانین انتشار (Scheduler)
- تقویم یا نمای لیستی برای نمایش پست‌ها و استوری‌های برنامه‌ریزی‌شده.
- پشتیبانی از زمان‌بندی تکرارشونده (مانند هر شنبه ساعت ۱۰).
- صف‌بندی و اولویت‌بندی محتوا با امکان لغو قبل از انتشار.
- پیش‌نمایش محتوا قبل از ارسال.

### 3. قالب‌های محتوا (Templates)
- تعریف قالب برای انواع محتوا (تصویر، استوری، ریلز، ویدیو).
- تعیین فونت، اندازه و محل متن، اورلی‌ها، واترمارک و هشتگ‌های خودکار.
- رفتارهای جایگزین در صورت کمبود منابع (مثلاً استفاده از تصویر گرادیان در نبود B-roll).

### 4. تولید خودکار ویدیو
- استخراج سوژه از Google Trends، RSS یا URLهای مشخص‌شده.
- امکان خلاصه‌سازی متن با OpenAI.
- تولید صدای فارسی با TTS (edge-tts یا گزینه‌های مشابه).
- تأمین خودکار B-roll از سرویس‌های ویدیویی یا آپلود دستی.
- مونتاژ صحنه با ترکیب B-roll، متن روی تصویر، صدا، موسیقی پس‌زمینه و ترنزیشن‌ها.
- خروجی گرفتن در قالب‌های عمودی 9:16، افقی و سایر نسبت‌ها (Reel، TikTok، YouTube).

### 5. سناریوهای ساخت ویدیو (Scenario Engine)
- تعریف سناریو به‌صورت JSON یا YAML برای تعیین ترتیب صحنه‌ها و قوانین تدوین.
- قوانین انتخاب B-roll، افکت‌های ویرایش (zoom، crop، color grade) و زمان‌بندی بر اساس ضرب آهنگ.
- رابط گرافیکی ساده (فرم یا بلوک‌های بصری) برای ساخت سناریو بدون نیاز به کدنویسی.

### 6. کنترل از طریق چت/پیام‌رسان
- بات تلگرام برای دریافت دستورات («بساز ویدیو ترند هفته»، «پست هفته را منتشر کن»، «لیست اکانت‌ها»).
- رابط وب مشابه چت برای اجرای سناریوها (اختیاری).

### 7. نوتیفیکیشن‌ها
- اطلاع‌رسانی موفقیت یا خطا از طریق تلگرام، ایمیل یا Slack.

### 8. داشبورد و لاگینگ
- نمایش وضعیت آخرین اجراها، خطاها و خروجی‌های تولیدشده.
- مشاهده جزئیات لاگ و فراخوانی APIها.

### 9. امنیت و رعایت قوانین پلتفرم‌ها
- ذخیره امن توکن‌ها با رمزنگاری (KMS یا AES محلی).
- انطباق با شرایط استفاده پلتفرم‌ها (مثلاً استفاده از Instagram Graph API برای حساب‌های بیزینس).
- اعمال محدودیت نرخ انتشار برای جلوگیری از بلاک شدن.

## نکات پیاده‌سازی پیشنهادی
- معماری میکروسرویس یا ماژولار با استفاده از صف پیام برای هماهنگی وظایف تولید و انتشار.
- استفاده از پایگاه‌داده امن برای ذخیره اعتبارنامه‌ها با رمزنگاری در سطح فیلد.
- مانیتورینگ با ابزارهایی مانند Prometheus/Grafana یا Sentry برای خطاها.
- تست و اعتبارسنجی سناریوها قبل از اجرا در محیط اصلی.

## گام‌های بعدی
1. طراحی معماری جزئی (کامپوننت‌ها، جریان داده، پایگاه‌داده).
2. تعریف APIها و قراردادهای ارتباطی بین ماژول‌ها.
3. پیاده‌سازی MVP با تمرکز بر پنل ادمین، مدیریت اکانت‌ها و انتشار زمان‌بندی‌شده.
4. توسعه تدریجی موتور سناریو و تولید ویدیو.
